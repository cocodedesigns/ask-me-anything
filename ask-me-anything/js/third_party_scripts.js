//https://github.com/ThrivingKings/Apprise-v2
var $Apprise=null,$overlay=null,$body=null,$window=null,$cA=null,AppriseQueue=[];jQuery(function(){$Apprise=jQuery('<div class="apprise">');$overlay=jQuery('<div class="apprise-overlay">');$body=jQuery("body");$window=jQuery(window);$body.append($overlay.css("opacity",".75")).append($Apprise)});
function Apprise(d,k){if(void 0===d||!d)return!1;var e=this,g=jQuery('<div class="apprise-inner">'),h=jQuery('<div class="apprise-buttons">'),f=jQuery('<input type="text">'),a={animation:700,buttons:{confirm:{action:function(){e.dissapear()},className:null,id:"confirm",text:"Ok"}},input:!1,override:!0};jQuery.extend(a,k);"close"==d?$cA.dissapear():$Apprise.is(":visible")?AppriseQueue.push({text:d,options:a}):(this.adjustWidth=function(){var a=$window.width(),b="20%",c="40%";800>=a?(b="90%",c="5%"):
1400>=a&&800<a?(b="70%",c="15%"):1800>=a&&1400<a?(b="50%",c="25%"):2200>=a&&1800<a&&(b="30%",c="35%");$Apprise.css("width",b).css("left",c)},this.dissapear=function(){$Apprise.animate({top:"-100%"},a.animation,function(){$overlay.fadeOut(100);$Apprise.hide();$window.unbind("beforeunload");$window.unbind("keydown");AppriseQueue[0]&&(Apprise(AppriseQueue[0].text,AppriseQueue[0].options),AppriseQueue.splice(0,1))})},this.keyPress=function(){$window.bind("keydown",function(d){27===d.keyCode?a.buttons.cancel?
jQuery("#apprise-btn-"+a.buttons.cancel.id).trigger("click"):e.dissapear():13===d.keyCode&&(a.buttons.confirm?jQuery("#apprise-btn-"+a.buttons.confirm.id).trigger("click"):e.dissapear())})},jQuery.each(a.buttons,function(a,b){if(b){var c=jQuery('<button id="apprise-btn-'+b.id+'">').append(b.text);b.className&&c.addClass(b.className);h.append(c);c.on("click",function(){var a={clicked:b,input:f.val()?f.val():null};b.action(a)})}}),a.override&&$window.bind("beforeunload",function(a){return"An alert requires attention"}),
e.adjustWidth(),$window.resize(function(){e.adjustWidth()}),$Apprise.html("").append(g.append('<div class="apprise-content">'+d+"</div>")).append(h),$cA=this,a.input&&g.find(".apprise-content").append(jQuery('<div class="apprise-input">').append(f)),$overlay.fadeIn(100),$Apprise.show().animate({top:"20%"},a.animation,function(){e.keyPress()}),a.input&&f.focus())};